(this["webpackJsonpbottle-rocket-frontend"]=this["webpackJsonpbottle-rocket-frontend"]||[]).push([[0],{24:function(e,t,n){e.exports=n(47)},29:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(22),o=n.n(i),c=(n(29),n(1)),l=n(2),s=n(4),u=n(3),m=n(7),f=(n(30),function(e){var t=e.isAdmin,n=e.loggedIn,a=e.firstName;return n?t?r.a.createElement("div",{className:"header"},"Welcome ".concat(a,"(Admin)!"),r.a.createElement("div",{className:"nav-options"},r.a.createElement(m.c,{className:"option",to:"/wines"},"Wines"),r.a.createElement(m.c,{className:"option",to:"/offers"},"Offers"),r.a.createElement(m.c,{className:"option",to:"/signout"},"Sign Out"))):r.a.createElement("div",{className:"header"},"Welcome ".concat(a,"(User)!"),r.a.createElement("div",{className:"nav-options"},r.a.createElement(m.c,{className:"option",to:"/"},"Home"),r.a.createElement(m.c,{className:"option",to:"/user/transactions"},"Purchase History"),r.a.createElement(m.c,{className:"option",to:"/user/profile"},"Profile"),r.a.createElement(m.c,{className:"option",to:"/signout"},"Sign Out"))):r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"nav-options"},r.a.createElement(m.c,{className:"option",to:"/"},"LARGE BOTTLEROCKET LOGO HERE THAT TAKES NOT LOGGED IN BACK TO SPLASH SCREEN"),r.a.createElement(m.c,{className:"option",to:"/signup"},"Sign Up"),r.a.createElement(m.c,{className:"option",to:"/signin"},"Log In")))}),d=n(11),h=(n(36),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{onChange:function(t){return e.chg(t)},name:e.name,className:e.inputClass,placeholder:e.label,value:e.value,type:e.inputType}))});h.defaultProps={inputType:"text",inputClass:"form-input"};var p=h,g="https://ancient-thicket-66765.herokuapp.com",E={login:function(e){return fetch("".concat(g,"/login"),e)},autoLogin:function(){return fetch("".concat(g,"/autologin"),{credentials:"include"})},logout:function(e){return fetch("".concat(g,"/logout"),e)}},b={getData:function(){return fetch("".concat(g,"/admin/data"),{credentials:"include"})},newWine:function(e){return fetch("".concat(g,"/wines/new"),e)},deleteWine:function(e,t){return fetch("".concat(g,"/wines/").concat(e),t)},newOffer:function(e){return fetch("".concat(g,"/offers/new"),e)},deleteOffer:function(e,t){return fetch("".concat(g,"/offers/").concat(e),t)}},v={signUp:function(e){return fetch("".concat(g,"/subscriptions/new"),e)}},O={show:function(){return fetch("".concat(g,"/user/profile"),{credentials:"include"})},destroy:function(e){return fetch("".concat(g,"/user/profile"),e)},update:function(e){return fetch("".concat(g,"/user/profile"),e)}},y=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.inputChanged=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value))},e.login=function(t){t.preventDefault();var n={method:"POST",credentials:"include",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify(e.state)};E.login(n).then((function(e){return e.json()})).then((function(t){return e.props.afterLogin(t)}))},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.clearError()}},{key:"render",value:function(){return r.a.createElement("div",{className:"group"},r.a.createElement("form",{onSubmit:this.login},this.props.error?r.a.createElement("h3",null,this.props.error):null,r.a.createElement(p,{name:"email",chg:this.inputChanged,label:"Email"}),r.a.createElement(p,{name:"password",chg:this.inputChanged,label:"Password",inputType:"password"}),r.a.createElement("input",{type:"submit"})))}}]),n}(a.Component),N=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={color:"black"},e.animateMsg=function(){e.setState({color:{black:"gray",gray:"black"}[e.state.color]})},e.logout=function(){clearInterval(e.blinker);E.logout({method:"DELETE",credentials:"include",headers:{accept:"application/json","content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.props.afterLogout(t)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.blinker=setInterval(this.animateMsg,250),console.log("Logging out in 10 seconds..."),setTimeout(this.logout,1800)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:{color:this.state.color}},"Logging Out..."))}}]),n}(a.Component),w=n(15),C=(n(37),{AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}),j=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",lastName:"",email:"",password:"",mobileNumber:"",shippingAddress1:"",shippingAddress2:"",city:"",zipcode:"",state:"CA"},e.inputChanged=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"group"},r.a.createElement("form",{onSubmit:function(t){return e.props.submit(t,e.state)}},Object.entries(this.props.errors).map((function(e){return r.a.createElement("h3",null,"".concat(e[0]," => ").concat(e[1][0]))})),r.a.createElement(p,{name:"firstName",value:this.state.firstName,label:"First Name:",chg:this.inputChanged}),r.a.createElement(p,{name:"lastName",value:this.state.lastName,label:"Last Name:",chg:this.inputChanged}),r.a.createElement(p,{name:"email",value:this.state.email,label:"Email:",inputType:"email",chg:this.inputChanged}),r.a.createElement(p,{name:"password",value:this.state.password,label:"Password (consider alternate method):",inputType:"password",chg:this.inputChanged}),r.a.createElement(p,{name:"mobileNumber",value:this.state.mobileNumber,label:"Cell Phone:",inputType:"tel",chg:this.inputChanged}),r.a.createElement(p,{name:"shippingAddress1",value:this.state.shippingAddress1,label:"Address:",chg:this.inputChanged}),r.a.createElement(p,{name:"shippingAddress2",value:this.state.shippingAddress2,label:"Apt / Other (revise this text):",chg:this.inputChanged}),r.a.createElement(p,{name:"city",value:this.state.city,label:"City:",chg:this.inputChanged}),r.a.createElement(p,{name:"zipcode",value:this.state.zipcode,label:"ZIP Code:",inputType:"number",chg:this.inputChanged}),r.a.createElement("select",{name:"state",onChange:function(t){return e.inputChanged(t)},value:this.state.state},Object.entries(C).map((function(e){var t=Object(w.a)(e,2),n=t[0],a=t[1];return r.a.createElement("option",{key:n,value:n},a)}))),r.a.createElement("input",{type:"submit"})))}}]),n}(a.PureComponent),A=(n(38),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={success:!1,errors:[]},e.submitNewUser=function(t,n){var a={};t.preventDefault();var r={method:"POST",body:JSON.stringify(n),credentials:"include",headers:{accept:"application/json","Content-Type":"application/json"}};v.signUp(r).then((function(e){return a.success=200===e.status,e.json()})).then((function(e){a.errors=e.errors||[]})).then((function(){return e.setState(a)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.state.success?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Signup complete!  Now sit back and wait for delicious grape juice offers to be sent to you.")):r.a.createElement("div",{className:"group"},r.a.createElement("h1",{className:"title"},"Sign Up for BottleRocket"),r.a.createElement(j,{submit:this.submitNewUser,errors:this.state.errors}))}}]),n}(a.PureComponent)),D=(n(39),n(40),n(5)),k=(n(41),n(14));k.start();var S=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={fullName:"",price:null,inventory:null,color:null,natural:!1,organic:!1,biodynamic:!1,image:null},e.handlePreviewImage=function(t){var n=t.target.files[0];n&&e.setState({image:n,preview:URL.createObjectURL(n)},e.props.upload(n))},e.handleChange=function(t){var n={},a=t.target;"checkbox"===a.type?n[a.name]=a.checked:n[a.name]=a.value,e.setState(n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.newWine,a=t.hasImg,i=this.state,o=(i.fullName,i.preview),c=(i.price,i.inventory,i.color,i.natural),l=i.organic,s=i.biodynamic,u=this.handleChange;return r.a.createElement("div",{className:"group"},r.a.createElement("h3",null,"Add New Wine"),r.a.createElement("form",{onSubmit:function(t){return n(t,e.state.image)},encType:"multipart/form-data"},r.a.createElement("input",{type:"file",name:"image",accept:"image/*",onChange:this.handlePreviewImage}),r.a.createElement("img",{src:o,alt:"",style:{width:"250px",height:"250px"}}),r.a.createElement(p,{name:"fullName",chg:u,label:"Wine Name (full)"}),r.a.createElement(p,{name:"price",chg:u,label:"Price:"}),r.a.createElement(p,{name:"inventory",chg:u,label:"Inventory:"}),r.a.createElement(p,{name:"color",chg:u,label:"Color:"}),r.a.createElement("label",null,"Natural:",r.a.createElement("input",{name:"natural",type:"checkbox",checked:c,onChange:u})),r.a.createElement("label",null,"Organic:",r.a.createElement("input",{name:"organic",type:"checkbox",checked:l,onChange:u})),r.a.createElement("label",null,"Biodynamic:",r.a.createElement("input",{name:"biodynamic",type:"checkbox",checked:s,onChange:u})),r.a.createElement("input",{type:"submit",disabled:!a})))}}]),n}(r.a.PureComponent),I=function(e){var t=e.wine,n=e.deleteWine,a=e.wineID;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,t.attributes.fullName),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return n(e,a)}},"Delete Wine")))},T=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={mode:"view",hasImageAttached:!1,image:null},e.directUpload=function(t){new k.DirectUpload(t,"".concat("https://ancient-thicket-66765.herokuapp.com","/images/direct_upload")).create(e.directUploadComplete)},e.directUploadComplete=function(t,n){e.setState({hasImageAttached:!t&&!!n.key,image:n.key||null})},e.submitNewWine=function(t){if(t.preventDefault(),e.state.hasImageAttached){var n=new FormData(t.target);n.append("imageKey",e.state.image);var a={method:"POST",credentials:"include",body:n};b.newWine(a).then((function(t){return e.processNewWine(t)}))}},e.processNewWine=function(t){200===t.status&&(e.setState({mode:"view"}),e.props.updateData())},e.setMode=function(t){e.setState({mode:t})},e.deleteWine=function(t,n){t.persist(),t.target.disabled=!0;b.deleteWine(n,{method:"DELETE",credentials:"include"}).then((function(n){return e.afterDelete(t,n)}))},e.afterDelete=function(t,n){200===n.status?e.props.updateData():t.target.disabled=!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;switch(this.state.mode){case"add":return r.a.createElement(S,{hasImg:this.state.hasImageAttached,upload:this.directUpload,newWine:this.submitNewWine,setMode:this.setMode});default:return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.setMode("add")}},"Add New Wine")),this.props.wines.map((function(t){return r.a.createElement(I,{key:t.id,wine:t,wineID:t.id,deleteWine:e.deleteWine})})))}}}]),n}(a.PureComponent),L=n(19),W=(n(42),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={offerDateTime:new Date(Date.now()).toISOString().slice(0,11)+"16:45",maxForThisWine:null,numOffered:1,wineSelected:!1,wineID:e.props.wines[0].id},e.handleChange=function(t){var n={},a=t.target;"choose"===a.value?n.wineSelected=!1:("checkbox"===a.type?n[a.name]=a.checked:n[a.name]=a.value,"wineID"===a.name&&(n.wineSelected=!0,n.maxForThisWine=e.props.wines.find((function(e){return e.id==+a.value})).attributes.inventory,n.maxForThisWine<e.state.numOffered&&(n.numOffered=n.maxForThisWine))),e.setState(n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.wines,a=t.newOffer,i=t.setMode,o=this.state.offerDateTime,c=!this.state.wineSelected;return r.a.createElement("div",{className:"group"},r.a.createElement("h1",null,"Create New Offer"),r.a.createElement("form",{onSubmit:function(t){return a(t,e.state)}},r.a.createElement("select",{name:"wineID",onChange:this.handleChange,required:!0},r.a.createElement("option",{value:"choose",label:"Choose a Wine for this Offer"}),n.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},"".concat(e.attributes.fullName," (").concat(e.attributes.inventory,"btls)"))}))),r.a.createElement("label",{htmlFor:"numOffered"},"Number to Offer"),r.a.createElement("input",{name:"numOffered",onChange:this.handleChange,min:"1",type:"number",value:this.state.numOffered,max:this.state.maxForThisWine,disabled:c}),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"offer-time"},"Choose a Date/Time to SMS this Offer:"),r.a.createElement("input",{type:"datetime-local",id:"offer-time",name:"offerDateTime",value:o,disabled:c,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){return i("view")}},"Cancel"),r.a.createElement("button",{disabled:c,type:"submit"},"Save New Offer"))))}}]),n}(r.a.PureComponent)),M=function(e){var t=e.offer,n=e.deleteOffer,a=e.offerID,i=e.broadcastOffer;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,t.fullName),r.a.createElement("h4",null,"Date of Offer: ",t.offerDateTime,"    Sold: ",t.numSold||0,"/",t.numOffered),r.a.createElement("div",null,r.a.createElement("h4",null,"Offer",t.isActiveOffer?" Active":" Inactive",r.a.createElement("button",{onClick:function(e){return n(e,a)}},"Delete Offer"),r.a.createElement("button",{onClick:function(){return i(a)}},"Broadcast this Offer Now"))))},P=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={selectedOffer:null,mode:"view"},e.submitNewOffer=function(t,n){t.preventDefault();var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return Object(L.a)(Object(L.a)({},t),{},Object(d.a)({},n,e[n]))}),{})}}("wineID","offerDateTime","numOffered")(n),r={method:"POST",headers:{accept:"application/json","content-type":"application/json"},credentials:"include",body:JSON.stringify(a)};b.newOffer(r).then((function(t){return e.processNewOffer(t)}))},e.processNewOffer=function(t){200===t.status&&(e.setState({mode:"view"}),e.props.updateData())},e.setMode=function(t){e.setState({mode:t})},e.deleteOffer=function(t,n){t.persist(),t.target.disabled=!0;b.deleteOffer(n,{method:"DELETE",credentials:"include"}).then((function(n){return e.afterDelete(t,n)}))},e.afterDelete=function(t,n){200===n.status?e.props.updateData():t.target.disabled=!1},e.broadcastOffer=function(t){console.log("Going to view to broadcast Offer via BottleRocket SMS for offer ".concat(t,"!")),e.setState({mode:"broadcast",selectedOffer:t})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;switch(this.state.mode){case"create":return r.a.createElement(W,{newOffer:this.submitNewOffer,wines:this.props.wines,setMode:this.setMode});case"broadcast":return r.a.createElement(r.a.Fragment,null,"Broadcast using Twilio Offer #",this.state.selectedOffer,r.a.createElement("button",{type:"button",onClick:function(){return e.setMode("view")}},"Cancel"));default:return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.setMode("create")}},"Create New Offer")),this.props.offers.map((function(t){return r.a.createElement(M,{key:t.id,offerID:t.id,deleteOffer:e.deleteOffer,broadcastOffer:e.broadcastOffer,offer:t.attributes})})))}}}]),n}(a.Component),F=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={users:[],offers:[],wines:[],dataFetchInProgress:!1,dataNeedsUpdate:!0},e.dataNeedsUpdate=function(){e.setState({dataNeedsUpdate:!0},(function(){return e.getNewData()}))},e.getNewData=function(){var t=e.state,n=t.dataFetchInProgress,a=t.dataNeedsUpdate;!n&&a&&e.setState({dataFetchInProgress:!0},(function(){b.getData().then((function(e){return e.json()})).then((function(t){e.setState({offers:t.offers.data,wines:t.wines.data,users:t.users.data,dataFetchInProgress:!1,dataNeedsUpdate:!1})}))}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getNewData()}},{key:"render",value:function(){var e=this,t=this.props.afterLogout;return r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/signout",render:function(){return r.a.createElement(N,{afterLogout:t})}}),r.a.createElement(D.a,{path:"/wines",render:function(){return r.a.createElement(T,{wines:e.state.wines,updateData:e.dataNeedsUpdate})}}),r.a.createElement(D.a,{path:"/offers",render:function(){return r.a.createElement(P,{wines:e.state.wines,offers:e.state.offers,updateData:e.dataNeedsUpdate})}}))}}]),n}(a.Component),x=(n(43),function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Welcome to Bottle Rocket, Where you can get great quality wines directly to you..."))}),U=function(e){var t=e.isAdmin;return r.a.createElement("div",null,t?r.a.createElement(F,null):r.a.createElement(x,null))},R=(n(44),function(e){var t=e.firstName,n=e.lastName,a=e.email,i=e.mobileNumber,o=e.shippingAddress1,c=e.shippingAddress2,l=e.city,s=e.state,u=e.zipcode,f=e.handleDelete,d=e.handleInputChange,h=e.handleEditSubmit;return t?r.a.createElement("div",{className:"group"},r.a.createElement("form",{onSubmit:function(e){return h(e)}},r.a.createElement(p,{name:"firstName",value:t,label:"First Name",chg:d}),r.a.createElement(p,{name:"lastName",value:n,label:"Last Name",chg:d}),r.a.createElement(p,{name:"email",value:a,label:"Email",inputType:"email",chg:d}),r.a.createElement(p,{name:"mobileNumber",value:i,label:"Mobile Number for SMS",inputType:"tel",chg:d}),r.a.createElement(p,{name:"shippingAddress1",value:o,label:"Delivery Address",chg:d}),r.a.createElement(p,{name:"shippingAddress2",value:c,label:"Apt / Unit / Other (revise!)",chg:d}),r.a.createElement(p,{name:"city",value:l,label:"City",chg:d}),r.a.createElement(p,{name:"zipcode",value:u,label:"ZIP",chg:d}),r.a.createElement("select",{name:"state",onChange:function(e){return d(e)},value:s,className:"form-input"},Object.entries(C).map((function(e){var t=Object(w.a)(e,2),n=t[0],a=t[1];return r.a.createElement("option",{key:n,value:n},a)}))),r.a.createElement("input",{type:"submit"})),r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{onClick:f},"Delete Profile"))):null}),H=(n(45),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e.setFields=function(t){e.setState(t)},e.handleDelete=function(){O.destroy({method:"DELETE",credentials:"include"}).then((function(t){return e.props.afterDestroy}))},e.handleInputChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(d.a)({},a,r))},e.handleEditSubmit=function(t){t.preventDefault();var n={method:"PATCH",credentials:"include",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.state)};O.update(n).then((function(e){return e.json()})).then(console.log)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.show().then((function(e){return e.json()})).then((function(t){return e.setFields(t.user.data.attributes)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R,{firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,mobileNumber:this.state.mobileNumber,shippingAddress1:this.state.shippingAddress1,shippingAddress2:this.state.shippingAddress2,city:this.state.city,state:this.state.state,zipcode:this.state.zipcode,handleDelete:this.handleDelete,handleEditSubmit:this.handleEditSubmit,handleInputChange:this.handleInputChange}))}}]),n}(a.Component)),K=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loggedIn,n=e.isAdmin,a=e.afterLogin,i=e.afterLogout,o=e.afterDestroy,c=e.loginError,l=e.clearLoginError;return t?n?r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{afterLogout:i})):r.a.createElement(r.a.Fragment,null,r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/",render:function(){return r.a.createElement(U,{isAdmin:n})}}),r.a.createElement(D.a,{exact:!0,path:"/signout",render:function(){return r.a.createElement(N,{afterLogout:i})}}),r.a.createElement(D.a,{path:"/user/profile",render:function(){return r.a.createElement(H,{afterDestroy:o})}}))):r.a.createElement(r.a.Fragment,null,"(need splash screen for app  i.e. HOW BOTTLEROCKET WORKS)",r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/signin",render:function(){return r.a.createElement(y,{error:c,clearError:l,afterLogin:a})}}),r.a.createElement(D.a,{exact:!0,path:"/signup",component:A})))}}]),n}(r.a.Component),B=(n(46),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loggedIn:!1,isAdmin:!1,email:null,firstName:null,loginError:null},e.checkLogin=function(t){if(t.expires){var n=Date.parse(t.expires)-Date.now();setTimeout(e.logout,n)}e.setState({loggedIn:t.loggedIn,isAdmin:t.isAdmin,email:t.email,firstName:t.firstName,logsOutAt:t.expires||null,loginError:t.error||null})},e.logout=function(){e.setState({loggedIn:!1,isAdmin:!1,email:null,firstName:null,logsOutAt:null,loginError:"Your session timed out. Please login."},(function(){return e.props.history.push("/signin")}))},e.clearLoginErrors=function(){e.setState({loginError:null})},e.afterLogout=function(t){e.checkLogin(t),e.props.history.push("/")},e.afterLogin=function(t){e.checkLogin(t),t.loggedIn&&e.props.history.push("/")},e.afterDestroy=function(){e.setState({loggedIn:!1,isAdmin:!1,email:null,firstName:null})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;E.autoLogin().then((function(e){return e.json()})).then((function(t){return e.checkLogin(t)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f,{loggedIn:this.state.loggedIn,isAdmin:this.state.isAdmin,email:this.state.email,firstName:this.state.firstName}),r.a.createElement(K,{loggedIn:this.state.loggedIn,loginError:this.state.loginError,isAdmin:this.state.isAdmin,clearLoginError:this.clearLoginErrors,afterLogin:this.afterLogin,afterLogout:this.afterLogout,afterDestroy:this.afterDestroy}))}}]),n}(r.a.PureComponent)),z=Object(D.f)(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(m.a,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.d86ad8e1.chunk.js.map